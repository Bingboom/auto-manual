% ==================================================
% layout.tex
% L4 PAGE LAYOUT LAYER
% 只负责页面结构，不负责类型系统
% ==================================================

\usepackage{geometry}
\usepackage{fancyhdr}

% ==================================================
% PAGE GEOMETRY
% ==================================================

\geometry{
  paperwidth=\csname HBpage_paperwidth\endcsname,
  paperheight=\csname HBpage_paperheight\endcsname,
  left=\csname HBpage_margin_left\endcsname,
  right=\csname HBpage_margin_right\endcsname,
  top=\csname HBpage_margin_top\endcsname,
  bottom=\csname HBpage_margin_bottom\endcsname
}

% ==================================================
% PAGE NUMBER FORMAT
% ==================================================

\newcommand{\HBPageNumber}{%
  \ifnum\csname HBpage_footer_leading_zero\endcsname=1\relax
    \ifnum\value{page}<10\relax 0\fi
  \fi
  \arabic{page}%
}

% ==================================================
% FOOTER STYLE
% ==================================================

\fancypagestyle{normal}{%
  \fancyhf{}%
  \renewcommand{\headrulewidth}{\csname HBpage_headrulewidth\endcsname}%
  \renewcommand{\footrulewidth}{\csname HBpage_footrulewidth\endcsname}%
  \fancyfoot[L]{%
    \raisebox{\csname HBpage_footer_raise\endcsname}{%
      \HBTypeFooter{\HBPageNumber}%
    }%
  }%
}

\fancypagestyle{plain}{%
  \fancyhf{}%
  \renewcommand{\headrulewidth}{\csname HBpage_headrulewidth\endcsname}%
  \renewcommand{\footrulewidth}{\csname HBpage_footrulewidth\endcsname}%
  \fancyfoot[L]{%
    \raisebox{\csname HBpage_footer_raise\endcsname}{%
      \HBTypeFooter{\HBPageNumber}%
    }%
  }%
}

\pagestyle{normal}

% ==================================================
% GLOBAL PARAGRAPH SPACING
% ==================================================

\setlength{\parindent}{\csname HBpage_parindent\endcsname}
\setlength{\parskip}{\csname HBpage_parskip\endcsname}
